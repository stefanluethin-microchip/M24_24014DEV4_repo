# This file was generated by the CI/CD Wizard version 1.2.19.
# For information on MDB and how to extend this script see: https://microchipdeveloper.com/mplabx:mdb

# Set tool and device
device ATSAMD21J18A
hwtool SIM

# Generate simulator coverage data and write it to a file
set codecoverage.enabled Enabled_Reset_on_run
set codecoverage.enableoutputtofile true
set codecoverage.outputtofile simulator-coverage.txt

# Alternative: generate coverage data using XC Code Coverage
# Requires that the project is built with the -mcodecov option and an XC Code Coverage license
# (see https://microchipdeveloper.com/xcc:mplab-code-coverage)
# set xccodecoverage.reporttype all
# set xccodecoverage.htmlreportpath coverage
# set xccodecoverage.replacehtmlreport true

# Write serial communication from uart1 to file. This can be used to analyse test reports from unity.
set uart1io.uartioenabled true
set uart1io.output file
set uart1io.outputfile ./sercom_output.txt

# The binary path used bellow is set to match what is used by the build job (Linux based).
# To run this script locally, replace next line with Program followed by the path to your local binary file
program ./dist/build.elf

# You can customize the script by changing the remaining lines.
# The default setup will run the simulator for 30 seconds before exiting.
run
wait 30000
halt
quit